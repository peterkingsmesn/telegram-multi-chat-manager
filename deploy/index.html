<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í…”ë ˆê·¸ë¨ ë©€í‹° ì±— ë§¤ë‹ˆì €</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>í…”ë ˆê·¸ë¨ ë©€í‹° ì±— ë§¤ë‹ˆì €</h1>
            <div class="api-status">
                <span class="api-count">í™œì„± API: <span id="activeApiCount">0</span>/30</span>
                <span class="proxy-status" id="proxyStatus" style="margin-left: 20px; display: none;">
                    í”„ë¡ì‹œ: <span id="proxyInfo">-</span>
                </span>
            </div>
        </header>

        <div class="main-container">
            <!-- ì™¼ìª½ ì»¨í…Œì´ë„ˆ -->
            <div class="left-container">
                <!-- ìˆ˜ìµì¸ì¦ ì„¹ì…˜ -->
                <section class="clipboard-section">
                    <h2>ìˆ˜ìµì¸ì¦</h2>
                    <div class="clipboard-buttons">
                        <button class="clipboard-btn" data-capacity="10">
                            <span class="btn-number">1</span>
                            <span class="btn-capacity">10</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="20">
                            <span class="btn-number">2</span>
                            <span class="btn-capacity">20</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="30">
                            <span class="btn-number">3</span>
                            <span class="btn-capacity">30</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="50">
                            <span class="btn-number">4</span>
                            <span class="btn-capacity">50</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="70">
                            <span class="btn-number">5</span>
                            <span class="btn-capacity">70</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="100">
                            <span class="btn-number">6</span>
                            <span class="btn-capacity">100</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="150">
                            <span class="btn-number">7</span>
                            <span class="btn-capacity">150</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="200">
                            <span class="btn-number">8</span>
                            <span class="btn-capacity">200</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="250">
                            <span class="btn-number">9</span>
                            <span class="btn-capacity">250</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="300">
                            <span class="btn-number">10</span>
                            <span class="btn-capacity">300</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="400">
                            <span class="btn-number">11</span>
                            <span class="btn-capacity">400</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="500">
                            <span class="btn-number">12</span>
                            <span class="btn-capacity">500</span>
                        </button>
                    </div>
                </section>
                
                <!-- ë©”ì‹œì§€ í…œí”Œë¦¿ ì„¹ì…˜ -->
                <section class="message-templates">
                    <div class="template-header">
                        <h2>ë©”ì‹œì§€ í…œí”Œë¦¿</h2>
                        <button class="btn-speed-settings" id="speedSettingsBtn">âš¡ ì „ì†¡ ì†ë„ ì„¤ì •</button>
                    </div>
                    <div class="template-list" id="templateList">
                        <!-- 10ê°œì˜ í…œí”Œë¦¿ ì…ë ¥ì¹¸ì´ ìƒì„±ë¨ -->
                    </div>
                </section>
                
                <!-- ë“±ë¡ëœ í™”ë ¥ ë¦¬ìŠ¤íŠ¸ ì„¹ì…˜ -->
                <section class="firepower-list-section">
                    <div class="firepower-list-header">
                        <h2>ë“±ë¡ëœ í™”ë ¥ ëª©ë¡</h2>
                        <button class="btn-refresh-all-groups" id="refreshAllGroupsBtn" title="ëª¨ë“  ê³„ì •ì˜ ê·¸ë£¹ ëª©ë¡ ìƒˆë¡œê³ ì¹¨">ğŸ”„</button>
                    </div>
                    <div class="firepower-accounts" id="firepowerAccountsList">
                        <!-- ë“±ë¡ëœ í™”ë ¥ ê³„ì •ë“¤ì´ í‘œì‹œë¨ -->
                    </div>
                </section>
            </div>

            <!-- ì˜¤ë¥¸ìª½ ì»¨í…Œì´ë„ˆ -->
            <div class="right-container">
                <!-- ì „ë¬¸ê°€ ì„¹ì…˜ -->
                <section class="expert-section">
                    <h2>ì „ë¬¸ê°€ ì„¹ì…˜</h2>
                <div class="expert-controls">
                    <button class="btn-add-expert-api" id="addExpertApiBtn" onclick="window.open('api_register.html', '_blank')">ğŸ“± API ë“±ë¡</button>
                    <button class="btn-user-register-api" id="showRegisterModalBtn">ì‚¬ìš©ì API ë“±ë¡</button>
                    <button class="btn-api-manager" id="showApiManagerBtn">ğŸ”§ API ê´€ë¦¬</button>
                    <button class="btn-cleanup-duplicates" id="cleanupDuplicatesBtn">ì¤‘ë³µ ì •ë¦¬</button>
                    <button class="btn-debug-accounts" id="debugAccountsBtn">ğŸ” ê³„ì • ë””ë²„ê·¸</button>
                    <button class="btn-reset-accounts" id="resetAccountsBtn">ğŸ”„ ê³„ì • ì¬êµ¬ì„±</button>
                    <button class="btn-reconnect-accounts" id="reconnectAccountsBtn">ì¤‘ìš” ê³„ì • ì¬ì—°ê²°</button>
                    <button class="btn-reset-image-session" id="resetImageSessionBtn">ğŸ² ì´ë¯¸ì§€ ì„¸ì…˜ ì´ˆê¸°í™”</button>
                    <button class="btn-broadcast" id="broadcastBtn">ì „ì²´ ì „ì†¡</button>
                </div>
                <div class="chat-rooms" id="expertRooms">
                    <!-- ë“±ë¡ëœ APIë³„ ê·¸ë£¹ ì¹´ë“œê°€ ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>
                
                <!-- ë©”ì‹œì§€ ì „ì†¡ ì˜ì—­ -->
                <div class="message-compose">
                    <div class="input-toolbar">
                        <button class="emoji-btn" title="ì´ëª¨ì§€">ğŸ˜Š</button>
                        <label for="attachFile" class="attach-btn" title="íŒŒì¼ ì²¨ë¶€">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                            </svg>
                        </label>
                        <input type="file" id="attachFile" accept="image/*,video/*,audio/*,.pdf,.doc,.docx,.txt" style="display: none;">
                    </div>
                    <div class="message-input-wrapper">
                        <div class="attached-files" id="attachedFiles">
                            <!-- ì²¨ë¶€ëœ íŒŒì¼ ë¯¸ë¦¬ë³´ê¸° -->
                        </div>
                        <textarea 
                            id="messageTextarea" 
                            placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”... (Enter: ì „ì†¡, Shift+Enter: ì¤„ë°”ê¿ˆ, Ctrl+V: ì´ë¯¸ì§€ ë¶™ì—¬ë„£ê¸°)" 
                            rows="4"
                        ></textarea>
                    </div>
                    <div class="send-controls">
                        <div class="selected-groups">
                            <span>ì„ íƒëœ ê·¸ë£¹: <span id="selectedGroupCount">0</span>ê°œ</span>
                        </div>
                        <button class="btn-send-message" id="sendMessageBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                            ì „ì†¡
                        </button>
                    </div>
                </div>
            </section>

            <!-- í™”ë ¥ë³„ ì„¹ì…˜ -->
            <section class="firepower-section">
                <h2>í™”ë ¥ë³„ ê·¸ë£¹ë°©</h2>
                <div class="firepower-controls" style="text-align: center; margin-bottom: 15px;">
                    <button class="btn-auto-setup" id="autoSetupBtn" style="background-color: #ff6b35; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: bold;">ğŸ“‹ ëª¨ë“  í™”ë ¥ ìë™ ë°°ì¹˜</button>
                </div>
                <div class="firepower-tabs">
                    <div class="firepower-grid">
                        <button class="tab-btn active" data-firepower="1">1</button>
                        <button class="tab-btn" data-firepower="2">2</button>
                        <button class="tab-btn" data-firepower="3">3</button>
                        <button class="tab-btn" data-firepower="4">4</button>
                        <button class="tab-btn" data-firepower="5">5</button>
                        <button class="tab-btn" data-firepower="6">6</button>
                        <button class="tab-btn" data-firepower="7">7</button>
                        <button class="tab-btn" data-firepower="8">8</button>
                        <button class="tab-btn" data-firepower="9">9</button>
                        <button class="tab-btn" data-firepower="10">10</button>
                        <button class="tab-btn" data-firepower="11">11</button>
                        <button class="tab-btn" data-firepower="12">12</button>
                        <button class="tab-btn" data-firepower="13">13</button>
                        <button class="tab-btn" data-firepower="14">14</button>
                        <button class="tab-btn" data-firepower="15">15</button>
                        <button class="tab-btn" data-firepower="16">16</button>
                        <button class="tab-btn" data-firepower="17">17</button>
                        <button class="tab-btn" data-firepower="18">18</button>
                        <button class="tab-btn" data-firepower="19">19</button>
                        <button class="tab-btn" data-firepower="20">20</button>
                        <button class="tab-btn" data-firepower="21">21</button>
                        <button class="tab-btn" data-firepower="22">22</button>
                        <button class="tab-btn" data-firepower="23">23</button>
                        <button class="tab-btn" data-firepower="24">24</button>
                        <button class="tab-btn" data-firepower="25">25</button>
                        <button class="tab-btn" data-firepower="26">26</button>
                        <button class="tab-btn" data-firepower="27">27</button>
                        <button class="tab-btn" data-firepower="28">28</button>
                        <button class="tab-btn" data-firepower="29">29</button>
                        <button class="tab-btn" data-firepower="30">30</button>
                    </div>
                </div>
                
                <div class="firepower-content">
                    <div class="firepower-main">
                        <h3>í™”ë ¥ <span id="currentFirepower">1</span></h3>
                        <div class="firepower-controls">
                            <button class="btn-add-firepower-api" id="addFirepowerApiBtn">API ë“±ë¡í•˜ê¸°</button>
                        </div>
                        <div class="firepower-api-info" id="firepowerApiInfo" style="display: none;">
                            <p>ì—°ê²°ëœ ê³„ì •: <span id="firepowerAccountName">-</span></p>
                            <p>ì„ íƒëœ ê·¸ë£¹: <span id="firepowerGroupCount">0</span>ê°œ</p>
                            <div class="firepower-buttons">
                                <button class="btn-refresh-groups" id="refreshGroupsBtn">ê·¸ë£¹ ìƒˆë¡œê³ ì¹¨</button>
                                <button class="btn-change-api" id="changeApiBtn">API ë³€ê²½</button>
                                <button class="btn-delete-api" id="deleteApiBtn">API ì‚­ì œ</button>
                            </div>
                        </div>
                        <div class="firepower-groups" id="firepowerGroups">
                            <!-- ì„ íƒëœ ê·¸ë£¹ ëª©ë¡ í‘œì‹œ -->
                        </div>
                    </div>
                </div>
            </section>


            </div>
        </div>


        <!-- ì´ëª¨ì§€ ì„ íƒê¸° -->
        <div class="emoji-picker" id="emojiPicker">
            <div class="emoji-categories">
                <button class="emoji-category active" data-category="smileys">ğŸ˜Š</button>
                <button class="emoji-category" data-category="animals">ğŸ¶</button>
                <button class="emoji-category" data-category="food">ğŸ•</button>
                <button class="emoji-category" data-category="activities">âš½</button>
                <button class="emoji-category" data-category="objects">ğŸ’¡</button>
                <button class="emoji-category" data-category="symbols">â¤ï¸</button>
            </div>
            <div class="emoji-grid" id="emojiGrid">
                <!-- ì´ëª¨ì§€ë“¤ì´ ë™ì ìœ¼ë¡œ ë¡œë“œë¨ -->
            </div>
        </div>
    </div>

    <!-- API ì¶”ê°€ ëª¨ë‹¬ -->
    <div class="modal" id="apiModal">
        <div class="modal-content">
            <h3>API í‚¤ ì¶”ê°€</h3>
            <input type="text" id="apiKeyInput" placeholder="API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
            <input type="text" id="apiBotNameInput" placeholder="ë´‡ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
            <div class="modal-actions">
                <button id="saveApiBtn">ì €ì¥</button>
                <button id="cancelApiBtn">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <!-- API ë“±ë¡ ëª¨ë‹¬ -->
    <div class="modal" id="apiRegisterModal">
        <div class="modal-content">
            <h3>ìƒˆ í…”ë ˆê·¸ë¨ API ë“±ë¡</h3>
            <p class="api-guide">í…”ë ˆê·¸ë¨ API ì •ë³´ë¥¼ ì…ë ¥í•˜ì—¬ ê³„ì •ì„ ë“±ë¡í•˜ì„¸ìš”</p>
            
            <input type="tel" id="registerPhoneInput" placeholder="ì „í™”ë²ˆí˜¸ (ì˜ˆ: +1234567890, +33612345678)">
            <input type="number" id="registerApiIdInput" placeholder="API ID (ìˆ«ì)">
            <input type="text" id="registerApiHashInput" placeholder="API Hash (32ìë¦¬)" maxlength="32">
            
            <div class="modal-buttons">
                <button id="registerApiBtn" class="btn-register">API ë“±ë¡</button>
                <button id="cancelRegisterBtn" class="btn-cancel">ì·¨ì†Œ</button>
            </div>
            
            <div id="registerStatus" class="connection-status"></div>
            
            <div class="api-help">
                <h4>API ì •ë³´ ë°›ëŠ” ë°©ë²•:</h4>
                <ol>
                    <li>my.telegram.org ì ‘ì†</li>
                    <li>ì „í™”ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸</li>
                    <li>API development tools í´ë¦­</li>
                    <li>ìƒˆ ì•± ë§Œë“¤ê¸°</li>
                    <li>API IDì™€ API Hash ë³µì‚¬</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- ì „ë¬¸ê°€ API ì¶”ê°€ ëª¨ë‹¬ -->
    <div class="modal" id="expertApiModal">
        <div class="modal-content">
            <h3>í…”ë ˆê·¸ë¨ User API ì—°ê²°</h3>
            <input type="tel" id="expertPhoneInput" placeholder="ì „í™”ë²ˆí˜¸ (ì˜ˆ: +1234567890, +33612345678)">
            <button id="connectApiBtn" class="btn-connect-api">ì—°ê²°í•˜ê¸°</button>
            <button id="expertAppAuthBtn" class="btn-app-auth">ì•±ìœ¼ë¡œ ì¸ì¦</button>
            
            <div id="verificationSection" style="display: none;">
                <h4>ì¸ì¦ ì½”ë“œ ì…ë ¥</h4>
                <input type="text" id="verificationCode" placeholder="í…”ë ˆê·¸ë¨ìœ¼ë¡œ ë°›ì€ ì¸ì¦ ì½”ë“œ">
                <button id="verifyCodeBtn">í™•ì¸</button>
            </div>
            
            <div id="connectionStatus" class="connection-status"></div>
            
            <button id="testConnectionBtn" style="display: none;">ì—°ê²° í…ŒìŠ¤íŠ¸</button>
            <button id="loadGroupsBtn" style="display: none;">ê·¸ë£¹ ëª©ë¡ ë¶ˆëŸ¬ì˜¤ê¸°</button>
            
            <div class="group-selection" style="display: none;">
                <h4>ê·¸ë£¹ ì„ íƒ</h4>
                <div class="available-groups" id="availableGroups">
                    <!-- APIë¡œ ë¶ˆëŸ¬ì˜¨ ê·¸ë£¹ ëª©ë¡ì´ í‘œì‹œë¨ -->
                </div>
            </div>
            <div class="modal-actions">
                <button id="saveExpertApiBtn">ì €ì¥</button>
                <button id="cancelExpertApiBtn">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <!-- ì „ì²´ ì „ì†¡ ëª¨ë‹¬ -->
    <div class="modal" id="broadcastModal">
        <div class="modal-content">
            <h3>ì „ì²´ ì „ì†¡</h3>
            <div class="broadcast-options">
                <label>
                    <input type="checkbox" id="selectAllGroups" checked> ëª¨ë“  ê·¸ë£¹ ì„ íƒ
                </label>
                <div class="group-list" id="groupList">
                    <!-- ê·¸ë£¹ ì²´í¬ë°•ìŠ¤ ëª©ë¡ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>
            </div>
            <textarea id="broadcastMessage" placeholder="ì „ì†¡í•  ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." rows="5"></textarea>
            <div class="file-upload">
                <input type="file" id="broadcastFile" accept="image/*">
                <label for="broadcastFile">ì‚¬ì§„ ì²¨ë¶€</label>
            </div>
            <div class="modal-actions">
                <button id="sendBroadcastBtn">ì „ì†¡</button>
                <button id="cancelBroadcastBtn">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <!-- ìˆ˜ìµì¸ì¦ ëª¨ë‹¬ -->
    <div class="modal" id="profitModal">
        <div class="modal-content">
            <h3>ìˆ˜ìµì¸ì¦ <span id="profitBtnNumber">1</span> (ìš©ëŸ‰: <span id="profitCapacity">10</span>)</h3>
            
            <div class="profit-upload-section">
                <h4>ì´ë¯¸ì§€ ì—…ë¡œë“œ</h4>
                <div class="file-upload-area" id="profitFileUploadArea">
                    <input type="file" id="profitImageInput" accept="image/*" multiple>
                    <label for="profitImageInput" class="upload-label">
                        <div class="upload-icon">ğŸ“·</div>
                        <div class="upload-text">ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ê±°ë‚˜ ë“œë˜ê·¸í•˜ì„¸ìš”</div>
                        <div class="upload-hint">PNG, JPG, GIF íŒŒì¼ ì§€ì› (ìµœëŒ€ 10ê°œ)</div>
                    </label>
                </div>
                
                <div class="image-preview" id="profitImagePreview">
                    <!-- ì„ íƒëœ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸° -->
                </div>
            </div>
            
            <div class="profit-message-section">
                <h4>ë©”ì‹œì§€ (ì„ íƒì‚¬í•­)</h4>
                <textarea id="profitMessage" placeholder="ìˆ˜ìµì¸ì¦ê³¼ í•¨ê»˜ ë³´ë‚¼ ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." rows="3"></textarea>
            </div>
            
            <div class="profit-target-section">
                <h4>ì „ì†¡ ëŒ€ìƒ</h4>
                <div class="target-selection">
                    <label>
                        <input type="radio" name="profitTarget" value="all" checked>
                        ëª¨ë“  í™œì„± ê³„ì •ì˜ ëª¨ë“  ê·¸ë£¹
                    </label>
                    <label>
                        <input type="radio" name="profitTarget" value="expert">
                        ì „ë¬¸ê°€ë§Œ
                    </label>
                    <label>
                        <input type="radio" name="profitTarget" value="firepower">
                        í™”ë ¥ë§Œ
                    </label>
                    <label>
                        <input type="radio" name="profitTarget" value="select">
                        ì„ íƒëœ ê·¸ë£¹ë§Œ
                    </label>
                </div>
                
                <div class="selected-groups-display" id="profitSelectedGroups" style="display: none;">
                    <!-- ì„ íƒëœ ê·¸ë£¹ ëª©ë¡ì´ í‘œì‹œë¨ -->
                </div>
            </div>
            
            <div class="modal-actions">
                <button id="sendProfitBtn" class="btn-send-profit">ğŸ“¤ ìˆ˜ìµì¸ì¦ ì „ì†¡</button>
                <button id="cancelProfitBtn">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <!-- API ê´€ë¦¬ ëª¨ë‹¬ -->
    <div class="modal" id="apiManagerModal">
        <div class="modal-content api-manager-modal">
            <h3>ğŸ”§ API ê´€ë¦¬</h3>
            
            <div class="api-manager-tabs">
                <button class="tab-btn active" data-tab="expert">ì „ë¬¸ê°€ API</button>
                <button class="tab-btn" data-tab="firepower">í™”ë ¥ API</button>
            </div>
            
            <!-- ì „ë¬¸ê°€ API ê´€ë¦¬ -->
            <div class="api-tab-content active" id="expertApiTab">
                <div class="api-section-header">
                    <h4>ì „ë¬¸ê°€ ì„¹ì…˜ API ëª©ë¡</h4>
                    <button class="btn-add-api" id="addExpertApiConfig">+ ìƒˆ API ì¶”ê°€</button>
                </div>
                <div class="api-list" id="expertApiList">
                    <!-- ì „ë¬¸ê°€ API ëª©ë¡ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>
            </div>
            
            <!-- í™”ë ¥ API ê´€ë¦¬ -->
            <div class="api-tab-content" id="firepowerApiTab">
                <div class="api-section-header">
                    <h4>í™”ë ¥ ì„¹ì…˜ API ëª©ë¡</h4>
                    <button class="btn-add-api" id="addFirepowerApiConfig">+ ìƒˆ API ì¶”ê°€</button>
                </div>
                <div class="api-list" id="firepowerApiList">
                    <!-- í™”ë ¥ API ëª©ë¡ì´ ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>
            </div>
            
            <div class="modal-actions">
                <button id="saveApiConfigBtn" class="btn-save">ì €ì¥</button>
                <button id="cancelApiManagerBtn" class="btn-cancel">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <!-- API ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ -->
    <div class="modal" id="apiEditModal">
        <div class="modal-content">
            <h3 id="apiEditTitle">API ì¶”ê°€</h3>
            
            <div class="form-group">
                <label for="apiEditPhone">ì „í™”ë²ˆí˜¸</label>
                <input type="tel" id="apiEditPhone" placeholder="ì˜ˆ: +1234567890, +33612345678">
            </div>
            
            <div class="form-group">
                <label for="apiEditId">API ID</label>
                <input type="number" id="apiEditId" placeholder="12345678">
            </div>
            
            <div class="form-group">
                <label for="apiEditHash">API Hash</label>
                <input type="text" id="apiEditHash" placeholder="32ìë¦¬ í•´ì‹œ">
            </div>
            
            <div class="form-group">
                <label for="apiEditType">ë°°ì¹˜ íƒ€ì…</label>
                <select id="apiEditType">
                    <option value="firepower">í™”ë ¥ (ê¸°ë³¸)</option>
                    <option value="expert">ì „ë¬¸ê°€</option>
                </select>
            </div>
            
            <div class="form-group" id="firepowerNumberGroup" style="display: none;">
                <label for="apiEditFirepowerNumber">í™”ë ¥ ë²ˆí˜¸</label>
                <input type="number" id="apiEditFirepowerNumber" min="1" max="30" placeholder="1-30">
            </div>
            
            <div class="modal-actions">
                <button id="saveApiEditBtn" class="btn-save">ì €ì¥</button>
                <button id="cancelApiEditBtn" class="btn-cancel">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <!-- ë©”ì‹œì§€ ì „ì†¡ ì†ë„ ì„¤ì • ëª¨ë‹¬ -->
    <div class="modal" id="speedSettingsModal">
        <div class="modal-content speed-settings-modal">
            <h3>âš¡ ë©”ì‹œì§€ ì „ì†¡ ì†ë„ ì„¤ì •</h3>
            
            <div class="speed-settings-container">
                <div class="current-speed-display">
                    <label>í˜„ì¬ ì„¤ì •ëœ ì†ë„:</label>
                    <span id="currentSpeedDisplay">0.8ì´ˆ</span>
                </div>
                
                <div class="speed-presets">
                    <h4>ë¹ ë¥¸ ì„¤ì •</h4>
                    <div class="speed-preset-buttons">
                        <button class="speed-preset-btn" data-speed="500">âš¡ ë¹ ë¦„ (0.5ì´ˆ)</button>
                        <button class="speed-preset-btn" data-speed="800">ğŸš€ ë³´í†µ (0.8ì´ˆ)</button>
                        <button class="speed-preset-btn active" data-speed="1000">ğŸŒ ì•ˆì „ (1.0ì´ˆ)</button>
                        <button class="speed-preset-btn" data-speed="1500">ğŸ›¡ï¸ ë§¤ìš° ì•ˆì „ (1.5ì´ˆ)</button>
                        <button class="speed-preset-btn" data-speed="2000">ğŸ”’ ì´ˆì•ˆì „ (2.0ì´ˆ)</button>
                    </div>
                </div>
                
                <div class="custom-speed-setting">
                    <h4>ì‚¬ìš©ì ì •ì˜ ì†ë„</h4>
                    <div class="custom-speed-input">
                        <label for="customSpeedInput">ì „ì†¡ ê°„ê²© (ë°€ë¦¬ì´ˆ):</label>
                        <input type="number" id="customSpeedInput" min="100" max="5000" step="100" value="800">
                        <span class="speed-unit">ms</span>
                    </div>
                    <div class="speed-preview">
                        <span id="speedPreview">= 0.8ì´ˆ</span>
                    </div>
                </div>
                
                <div class="speed-warning">
                    <p><strong>âš ï¸ ì£¼ì˜ì‚¬í•­:</strong></p>
                    <ul>
                        <li>ë„ˆë¬´ ë¹ ë¥¸ ì†ë„(0.3ì´ˆ ë¯¸ë§Œ)ëŠ” ê³„ì • ì œì¬ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤</li>
                        <li>ì•ˆì „í•œ ì†ë„ëŠ” 0.8ì´ˆ ì´ìƒì„ ê¶Œì¥í•©ë‹ˆë‹¤</li>
                        <li>í™”ë ¥ ë©”ì‹œì§€ëŠ” ë³„ë„ë¡œ 1ì´ˆë¡œ ê³ ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤</li>
                    </ul>
                </div>
            </div>
            
            <div class="modal-actions">
                <button id="applySpeedBtn" class="btn-apply">âœ… ì ìš©</button>
                <button id="cancelSpeedBtn" class="btn-cancel">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    
    <!-- ì¸í…”ë¦¬ì „íŠ¸ ë™ê¸°í™” ì‹œìŠ¤í…œ CSS -->
    <style>
        /* ë©”ì‹œì§€ í…œí”Œë¦¿ í—¤ë” ìŠ¤íƒ€ì¼ */
        .template-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .btn-speed-settings {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn-speed-settings:hover {
            background: linear-gradient(135deg, #e55a2e, #e8841b);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        /* ì†ë„ ì„¤ì • ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .speed-settings-modal {
            max-width: 500px;
            width: 90%;
        }
        
        .speed-settings-container {
            padding: 20px 0;
        }
        
        .current-speed-display {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .current-speed-display label {
            display: block;
            font-weight: 600;
            color: #495057;
            margin-bottom: 5px;
        }
        
        .current-speed-display span {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
        }
        
        .speed-presets {
            margin-bottom: 25px;
        }
        
        .speed-presets h4 {
            margin-bottom: 15px;
            color: #495057;
            font-size: 16px;
        }
        
        .speed-preset-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }
        
        .speed-preset-btn {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            padding: 12px 8px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .speed-preset-btn:hover {
            background: #e9ecef;
            border-color: #adb5bd;
        }
        
        .speed-preset-btn.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .custom-speed-setting {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .custom-speed-setting h4 {
            margin-bottom: 15px;
            color: #495057;
        }
        
        .custom-speed-input {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .custom-speed-input label {
            font-weight: 500;
            color: #495057;
        }
        
        .custom-speed-input input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .speed-unit {
            font-weight: 500;
            color: #6c757d;
        }
        
        .speed-preview {
            text-align: center;
            margin-top: 10px;
        }
        
        .speed-preview span {
            font-size: 18px;
            font-weight: bold;
            color: #28a745;
        }
        
        .speed-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 15px;
        }
        
        .speed-warning p {
            margin: 0 0 10px 0;
            font-weight: 600;
            color: #856404;
        }
        
        .speed-warning ul {
            margin: 0;
            padding-left: 20px;
            color: #856404;
        }
        
        .speed-warning li {
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .btn-apply {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .btn-apply:hover {
            background: #218838;
        }
        
        /* ì‹ ê·œ ê·¸ë£¹ ì•Œë¦¼ ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        /* ì‹ ê·œ ê·¸ë£¹ ì•Œë¦¼ ìŠ¤íƒ€ì¼ */
        .new-groups-notification {
            font-size: 14px;
            line-height: 1.4;
        }
        
        .notification-header {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            border-radius: 7px 7px 0 0;
        }
        
        .notification-icon {
            font-size: 18px;
            margin-right: 8px;
        }
        
        .notification-title {
            flex: 1;
            font-weight: 600;
            color: #333;
        }
        
        .notification-close {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #666;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .notification-close:hover {
            color: #000;
        }
        
        .notification-content {
            padding: 16px;
        }
        
        .notification-message {
            margin: 0 0 12px 0;
            color: #555;
        }
        
        .new-groups-list {
            list-style: none;
            padding: 0;
            margin: 0 0 16px 0;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .new-group-item {
            display: flex;
            align-items: center;
            padding: 6px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .new-group-item:last-child {
            border-bottom: none;
        }
        
        .new-group-item input[type="checkbox"] {
            margin-right: 8px;
        }
        
        .group-name {
            flex: 1;
            cursor: pointer;
            color: #333;
        }
        
        .notification-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .notification-actions button {
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: #fff;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }
        
        .btn-add-selected {
            background: #007bff !important;
            color: white !important;
            border-color: #007bff !important;
        }
        
        .btn-add-selected:hover {
            background: #0056b3 !important;
        }
        
        .btn-add-all {
            background: #28a745 !important;
            color: white !important;
            border-color: #28a745 !important;
        }
        
        .btn-add-all:hover {
            background: #1e7e34 !important;
        }
        
        .btn-ignore:hover {
            background: #f8f9fa;
        }
        
        /* ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ ìƒíƒœ í‘œì‹œ */
        .btn-refresh-all-groups {
            transition: all 0.3s ease;
        }
        
        .btn-refresh-all-groups:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        /* ê·¸ë£¹ ìƒíƒœ ì‹œê°ì  í”¼ë“œë°± */
        .firepower-groups .group-item.removed {
            opacity: 0.5;
            text-decoration: line-through;
            color: #dc3545;
        }
        
        .firepower-groups .group-item.new {
            background: #d4edda;
            border-left: 3px solid #28a745;
            animation: highlightNew 2s ease-out;
        }
        
        @keyframes highlightNew {
            0% {
                background: #28a745;
                color: white;
            }
            100% {
                background: #d4edda;
                color: inherit;
            }
        }
        
        /* ë™ê¸°í™” ìƒíƒœ í‘œì‹œ */
        .sync-status {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: 500;
            margin-left: 8px;
        }
        
        .sync-status.syncing {
            background: #fff3cd;
            color: #856404;
        }
        
        .sync-status.success {
            background: #d4edda;
            color: #155724;
        }
        
        .sync-status.error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
    <script>
        // ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
        async function checkAuth() {
            try {
                const response = await fetch('http://localhost:5000/api/auth/status', {
                    credentials: 'include'
                });
                
                const result = await response.json();
                
                if (!result.authenticated) {
                    // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
                    window.location.href = 'login.html';
                    return false;
                }
                
                // ì‚¬ìš©ì ì •ë³´ ì €ì¥
                window.userInfo = result.user;
                return true;
            } catch (error) {
                console.error('Auth check failed:', error);
                window.location.href = 'login.html';
                return false;
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì¸ì¦ í™•ì¸
        checkAuth();
    </script>
    <script src="config_client.js"></script>
    <script src="app.js"></script>
</body>
</html>