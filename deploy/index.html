<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÌÖîÎ†àÍ∑∏Îû® Î©ÄÌã∞ Ï±ó Îß§ÎãàÏ†Ä</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>ÌÖîÎ†àÍ∑∏Îû® Î©ÄÌã∞ Ï±ó Îß§ÎãàÏ†Ä</h1>
            <div class="api-status">
                <span class="api-count">ÌôúÏÑ± API: <span id="activeApiCount">0</span>/30</span>
                <span class="proxy-status" id="proxyStatus" style="margin-left: 20px; display: none;">
                    ÌîÑÎ°ùÏãú: <span id="proxyInfo">-</span>
                </span>
            </div>
        </header>

        <div class="main-container">
            <!-- ÏôºÏ™Ω Ïª®ÌÖåÏù¥ÎÑà -->
            <div class="left-container">
                <!-- ÏàòÏùµÏù∏Ï¶ù ÏÑπÏÖò -->
                <section class="clipboard-section">
                    <h2>ÏàòÏùµÏù∏Ï¶ù</h2>
                    <div class="clipboard-buttons">
                        <button class="clipboard-btn" data-capacity="10">
                            <span class="btn-number">1</span>
                            <span class="btn-capacity">10</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="20">
                            <span class="btn-number">2</span>
                            <span class="btn-capacity">20</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="30">
                            <span class="btn-number">3</span>
                            <span class="btn-capacity">30</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="50">
                            <span class="btn-number">4</span>
                            <span class="btn-capacity">50</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="70">
                            <span class="btn-number">5</span>
                            <span class="btn-capacity">70</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="100">
                            <span class="btn-number">6</span>
                            <span class="btn-capacity">100</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="150">
                            <span class="btn-number">7</span>
                            <span class="btn-capacity">150</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="200">
                            <span class="btn-number">8</span>
                            <span class="btn-capacity">200</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="250">
                            <span class="btn-number">9</span>
                            <span class="btn-capacity">250</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="300">
                            <span class="btn-number">10</span>
                            <span class="btn-capacity">300</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="400">
                            <span class="btn-number">11</span>
                            <span class="btn-capacity">400</span>
                        </button>
                        <button class="clipboard-btn" data-capacity="500">
                            <span class="btn-number">12</span>
                            <span class="btn-capacity">500</span>
                        </button>
                    </div>
                </section>
                
                <!-- Î©îÏãúÏßÄ ÌÖúÌîåÎ¶ø ÏÑπÏÖò -->
                <section class="message-templates">
                    <div class="template-header">
                        <h2>Î©îÏãúÏßÄ ÌÖúÌîåÎ¶ø</h2>
                        <button class="btn-speed-settings" id="speedSettingsBtn">‚ö° Ï†ÑÏÜ° ÏÜçÎèÑ ÏÑ§Ï†ï</button>
                    </div>
                    <div class="template-list" id="templateList">
                        <!-- 10Í∞úÏùò ÌÖúÌîåÎ¶ø ÏûÖÎ†•Ïπ∏Ïù¥ ÏÉùÏÑ±Îê® -->
                    </div>
                </section>
                
                <!-- Îì±Î°ùÎêú ÌôîÎ†• Î¶¨Ïä§Ìä∏ ÏÑπÏÖò -->
                <section class="firepower-list-section">
                    <div class="firepower-list-header">
                        <h2>Îì±Î°ùÎêú ÌôîÎ†• Î™©Î°ù</h2>
                        <button class="btn-refresh-all-groups" id="refreshAllGroupsBtn" title="Î™®Îì† Í≥ÑÏ†ïÏùò Í∑∏Î£π Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®">üîÑ</button>
                    </div>
                    <div class="firepower-accounts" id="firepowerAccountsList">
                        <!-- Îì±Î°ùÎêú ÌôîÎ†• Í≥ÑÏ†ïÎì§Ïù¥ ÌëúÏãúÎê® -->
                    </div>
                </section>
            </div>

            <!-- Ïò§Î•∏Ï™Ω Ïª®ÌÖåÏù¥ÎÑà -->
            <div class="right-container">
                <!-- Ï†ÑÎ¨∏Í∞Ä ÏÑπÏÖò -->
                <section class="expert-section">
                    <h2>Ï†ÑÎ¨∏Í∞Ä ÏÑπÏÖò</h2>
                <div class="expert-controls">
                    <button class="btn-add-expert-api" id="addExpertApiBtn" onclick="window.open('api_register.html', '_blank')">üì± API Îì±Î°ù</button>
                    <button class="btn-user-register-api" id="showRegisterModalBtn">ÏÇ¨Ïö©Ïûê API Îì±Î°ù</button>
                    <button class="btn-api-manager" id="showApiManagerBtn">üîß API Í¥ÄÎ¶¨</button>
                    <button class="btn-cleanup-duplicates" id="cleanupDuplicatesBtn">Ï§ëÎ≥µ Ï†ïÎ¶¨</button>
                    <button class="btn-debug-accounts" id="debugAccountsBtn">üîç Í≥ÑÏ†ï ÎîîÎ≤ÑÍ∑∏</button>
                    <button class="btn-reset-accounts" id="resetAccountsBtn">üîÑ Í≥ÑÏ†ï Ïû¨Íµ¨ÏÑ±</button>
                    <button class="btn-reconnect-accounts" id="reconnectAccountsBtn">Ï§ëÏöî Í≥ÑÏ†ï Ïû¨Ïó∞Í≤∞</button>
                    <button class="btn-reset-image-session" id="resetImageSessionBtn">üé≤ Ïù¥ÎØ∏ÏßÄ ÏÑ∏ÏÖò Ï¥àÍ∏∞Ìôî</button>
                    <button class="btn-broadcast" id="broadcastBtn">Ï†ÑÏ≤¥ Ï†ÑÏÜ°</button>
                </div>
                <div class="chat-rooms" id="expertRooms">
                    <!-- Îì±Î°ùÎêú APIÎ≥Ñ Í∑∏Î£π Ïπ¥ÎìúÍ∞Ä ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
                </div>
                
                <!-- Î©îÏãúÏßÄ Ï†ÑÏÜ° ÏòÅÏó≠ -->
                <div class="message-compose">
                    <div class="input-toolbar">
                        <button class="emoji-btn" title="Ïù¥Î™®ÏßÄ">üòä</button>
                        <label for="attachFile" class="attach-btn" title="ÌååÏùº Ï≤®Î∂Ä">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                                <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                            </svg>
                        </label>
                        <input type="file" id="attachFile" accept="image/*,video/*,audio/*,.pdf,.doc,.docx,.txt" style="display: none;">
                    </div>
                    <div class="message-input-wrapper">
                        <div class="attached-files" id="attachedFiles">
                            <!-- Ï≤®Î∂ÄÎêú ÌååÏùº ÎØ∏Î¶¨Î≥¥Í∏∞ -->
                        </div>
                        <textarea 
                            id="messageTextarea" 
                            placeholder="Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî... (Enter: Ï†ÑÏÜ°, Shift+Enter: Ï§ÑÎ∞îÍøà, Ctrl+V: Ïù¥ÎØ∏ÏßÄ Î∂ôÏó¨ÎÑ£Í∏∞)" 
                            rows="4"
                        ></textarea>
                    </div>
                    <div class="send-controls">
                        <div class="selected-groups">
                            <span>ÏÑ†ÌÉùÎêú Í∑∏Î£π: <span id="selectedGroupCount">0</span>Í∞ú</span>
                        </div>
                        <button class="btn-send-message" id="sendMessageBtn">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                            Ï†ÑÏÜ°
                        </button>
                    </div>
                </div>
            </section>

            <!-- ÌôîÎ†•Î≥Ñ ÏÑπÏÖò -->
            <section class="firepower-section">
                <h2>ÌôîÎ†•Î≥Ñ Í∑∏Î£πÎ∞©</h2>
                <div class="firepower-controls" style="text-align: center; margin-bottom: 15px;">
                    <button class="btn-auto-setup" id="autoSetupBtn" style="background-color: #ff6b35; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: bold;">üìã Î™®Îì† ÌôîÎ†• ÏûêÎèô Î∞∞Ïπò</button>
                </div>
                <div class="firepower-tabs">
                    <div class="firepower-grid">
                        <button class="tab-btn active" data-firepower="1">1</button>
                        <button class="tab-btn" data-firepower="2">2</button>
                        <button class="tab-btn" data-firepower="3">3</button>
                        <button class="tab-btn" data-firepower="4">4</button>
                        <button class="tab-btn" data-firepower="5">5</button>
                        <button class="tab-btn" data-firepower="6">6</button>
                        <button class="tab-btn" data-firepower="7">7</button>
                        <button class="tab-btn" data-firepower="8">8</button>
                        <button class="tab-btn" data-firepower="9">9</button>
                        <button class="tab-btn" data-firepower="10">10</button>
                        <button class="tab-btn" data-firepower="11">11</button>
                        <button class="tab-btn" data-firepower="12">12</button>
                        <button class="tab-btn" data-firepower="13">13</button>
                        <button class="tab-btn" data-firepower="14">14</button>
                        <button class="tab-btn" data-firepower="15">15</button>
                        <button class="tab-btn" data-firepower="16">16</button>
                        <button class="tab-btn" data-firepower="17">17</button>
                        <button class="tab-btn" data-firepower="18">18</button>
                        <button class="tab-btn" data-firepower="19">19</button>
                        <button class="tab-btn" data-firepower="20">20</button>
                        <button class="tab-btn" data-firepower="21">21</button>
                        <button class="tab-btn" data-firepower="22">22</button>
                        <button class="tab-btn" data-firepower="23">23</button>
                        <button class="tab-btn" data-firepower="24">24</button>
                        <button class="tab-btn" data-firepower="25">25</button>
                        <button class="tab-btn" data-firepower="26">26</button>
                        <button class="tab-btn" data-firepower="27">27</button>
                        <button class="tab-btn" data-firepower="28">28</button>
                        <button class="tab-btn" data-firepower="29">29</button>
                        <button class="tab-btn" data-firepower="30">30</button>
                    </div>
                </div>
                
                <div class="firepower-content">
                    <div class="firepower-main">
                        <h3>ÌôîÎ†• <span id="currentFirepower">1</span></h3>
                        <div class="firepower-controls">
                            <button class="btn-add-firepower-api" id="addFirepowerApiBtn">API Îì±Î°ùÌïòÍ∏∞</button>
                        </div>
                        <div class="firepower-api-info" id="firepowerApiInfo" style="display: none;">
                            <p>Ïó∞Í≤∞Îêú Í≥ÑÏ†ï: <span id="firepowerAccountName">-</span></p>
                            <p>ÏÑ†ÌÉùÎêú Í∑∏Î£π: <span id="firepowerGroupCount">0</span>Í∞ú</p>
                            <div class="firepower-buttons">
                                <button class="btn-refresh-groups" id="refreshGroupsBtn">Í∑∏Î£π ÏÉàÎ°úÍ≥†Ïπ®</button>
                                <button class="btn-change-api" id="changeApiBtn">API Î≥ÄÍ≤Ω</button>
                                <button class="btn-delete-api" id="deleteApiBtn">API ÏÇ≠Ï†ú</button>
                            </div>
                        </div>
                        <div class="firepower-groups" id="firepowerGroups">
                            <!-- ÏÑ†ÌÉùÎêú Í∑∏Î£π Î™©Î°ù ÌëúÏãú -->
                        </div>
                    </div>
                </div>
            </section>


            </div>
        </div>


        <!-- Ïù¥Î™®ÏßÄ ÏÑ†ÌÉùÍ∏∞ -->
        <div class="emoji-picker" id="emojiPicker">
            <div class="emoji-categories">
                <button class="emoji-category active" data-category="smileys">üòä</button>
                <button class="emoji-category" data-category="animals">üê∂</button>
                <button class="emoji-category" data-category="food">üçï</button>
                <button class="emoji-category" data-category="activities">‚öΩ</button>
                <button class="emoji-category" data-category="objects">üí°</button>
                <button class="emoji-category" data-category="symbols">‚ù§Ô∏è</button>
            </div>
            <div class="emoji-grid" id="emojiGrid">
                <!-- Ïù¥Î™®ÏßÄÎì§Ïù¥ ÎèôÏ†ÅÏúºÎ°ú Î°úÎìúÎê® -->
            </div>
        </div>
    </div>

    <!-- API Ï∂îÍ∞Ä Î™®Îã¨ -->
    <div class="modal" id="apiModal">
        <div class="modal-content">
            <h3>API ÌÇ§ Ï∂îÍ∞Ä</h3>
            <input type="text" id="apiKeyInput" placeholder="API ÌÇ§Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
            <input type="text" id="apiBotNameInput" placeholder="Î¥á Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
            <div class="modal-actions">
                <button id="saveApiBtn">Ï†ÄÏû•</button>
                <button id="cancelApiBtn">Ï∑®ÏÜå</button>
            </div>
        </div>
    </div>

    <!-- API Îì±Î°ù Î™®Îã¨ -->
    <div class="modal" id="apiRegisterModal">
        <div class="modal-content">
            <h3>ÏÉà ÌÖîÎ†àÍ∑∏Îû® API Îì±Î°ù</h3>
            <p class="api-guide">ÌÖîÎ†àÍ∑∏Îû® API Ï†ïÎ≥¥Î•º ÏûÖÎ†•ÌïòÏó¨ Í≥ÑÏ†ïÏùÑ Îì±Î°ùÌïòÏÑ∏Ïöî</p>
            
            <input type="tel" id="registerPhoneInput" placeholder="Ï†ÑÌôîÎ≤àÌò∏ (Ïòà: +1234567890, +33612345678)">
            <input type="number" id="registerApiIdInput" placeholder="API ID (Ïà´Ïûê)">
            <input type="text" id="registerApiHashInput" placeholder="API Hash (32ÏûêÎ¶¨)" maxlength="32">
            
            <div class="modal-buttons">
                <button id="registerApiBtn" class="btn-register">API Îì±Î°ù</button>
                <button id="cancelRegisterBtn" class="btn-cancel">Ï∑®ÏÜå</button>
            </div>
            
            <div id="registerStatus" class="connection-status"></div>
            
            <div class="api-help">
                <h4>API Ï†ïÎ≥¥ Î∞õÎäî Î∞©Î≤ï:</h4>
                <ol>
                    <li>my.telegram.org Ï†ëÏÜç</li>
                    <li>Ï†ÑÌôîÎ≤àÌò∏Î°ú Î°úÍ∑∏Ïù∏</li>
                    <li>API development tools ÌÅ¥Î¶≠</li>
                    <li>ÏÉà Ïï± ÎßåÎì§Í∏∞</li>
                    <li>API IDÏôÄ API Hash Î≥µÏÇ¨</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- Ï†ÑÎ¨∏Í∞Ä API Ï∂îÍ∞Ä Î™®Îã¨ -->
    <div class="modal" id="expertApiModal">
        <div class="modal-content">
            <h3>ÌÖîÎ†àÍ∑∏Îû® User API Ïó∞Í≤∞</h3>
            <input type="tel" id="expertPhoneInput" placeholder="Ï†ÑÌôîÎ≤àÌò∏ (Ïòà: +1234567890, +33612345678)">
            <button id="connectApiBtn" class="btn-connect-api">Ïó∞Í≤∞ÌïòÍ∏∞</button>
            <button id="expertAppAuthBtn" class="btn-app-auth">Ïï±ÏúºÎ°ú Ïù∏Ï¶ù</button>
            
            <div id="verificationSection" style="display: none;">
                <h4>Ïù∏Ï¶ù ÏΩîÎìú ÏûÖÎ†•</h4>
                <input type="text" id="verificationCode" placeholder="ÌÖîÎ†àÍ∑∏Îû®ÏúºÎ°ú Î∞õÏùÄ Ïù∏Ï¶ù ÏΩîÎìú">
                <button id="verifyCodeBtn">ÌôïÏù∏</button>
            </div>
            
            <div id="connectionStatus" class="connection-status"></div>
            
            <button id="testConnectionBtn" style="display: none;">Ïó∞Í≤∞ ÌÖåÏä§Ìä∏</button>
            <button id="loadGroupsBtn" style="display: none;">Í∑∏Î£π Î™©Î°ù Î∂àÎü¨Ïò§Í∏∞</button>
            
            <div class="group-selection" style="display: none;">
                <h4>Í∑∏Î£π ÏÑ†ÌÉù</h4>
                <div class="available-groups" id="availableGroups">
                    <!-- APIÎ°ú Î∂àÎü¨Ïò® Í∑∏Î£π Î™©Î°ùÏù¥ ÌëúÏãúÎê® -->
                </div>
            </div>
            <div class="modal-actions">
                <button id="saveExpertApiBtn">Ï†ÄÏû•</button>
                <button id="cancelExpertApiBtn">Ï∑®ÏÜå</button>
            </div>
        </div>
    </div>

    <!-- Ï†ÑÏ≤¥ Ï†ÑÏÜ° Î™®Îã¨ -->
    <div class="modal" id="broadcastModal">
        <div class="modal-content">
            <h3>Ï†ÑÏ≤¥ Ï†ÑÏÜ°</h3>
            <div class="broadcast-options">
                <label>
                    <input type="checkbox" id="selectAllGroups" checked> Î™®Îì† Í∑∏Î£π ÏÑ†ÌÉù
                </label>
                <div class="group-list" id="groupList">
                    <!-- Í∑∏Î£π Ï≤¥ÌÅ¨Î∞ïÏä§ Î™©Î°ùÏù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
                </div>
            </div>
            <textarea id="broadcastMessage" placeholder="Ï†ÑÏÜ°Ìï† Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî..." rows="5"></textarea>
            <div class="file-upload">
                <input type="file" id="broadcastFile" accept="image/*">
                <label for="broadcastFile">ÏÇ¨ÏßÑ Ï≤®Î∂Ä</label>
            </div>
            <div class="modal-actions">
                <button id="sendBroadcastBtn">Ï†ÑÏÜ°</button>
                <button id="cancelBroadcastBtn">Ï∑®ÏÜå</button>
            </div>
        </div>
    </div>

    <!-- ÏàòÏùµÏù∏Ï¶ù Î™®Îã¨ -->
    <div class="modal" id="profitModal">
        <div class="modal-content">
            <h3>ÏàòÏùµÏù∏Ï¶ù <span id="profitBtnNumber">1</span> (Ïö©Îüâ: <span id="profitCapacity">10</span>)</h3>
            
            <div class="profit-upload-section">
                <h4>Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú</h4>
                <div class="file-upload-area" id="profitFileUploadArea">
                    <input type="file" id="profitImageInput" accept="image/*" multiple>
                    <label for="profitImageInput" class="upload-label">
                        <div class="upload-icon">üì∑</div>
                        <div class="upload-text">Ïù¥ÎØ∏ÏßÄÎ•º ÏÑ†ÌÉùÌïòÍ±∞ÎÇò ÎìúÎûòÍ∑∏ÌïòÏÑ∏Ïöî</div>
                        <div class="upload-hint">PNG, JPG, GIF ÌååÏùº ÏßÄÏõê (ÏµúÎåÄ 10Í∞ú)</div>
                    </label>
                </div>
                
                <div class="image-preview" id="profitImagePreview">
                    <!-- ÏÑ†ÌÉùÎêú Ïù¥ÎØ∏ÏßÄ ÎØ∏Î¶¨Î≥¥Í∏∞ -->
                </div>
            </div>
            
            <div class="profit-message-section">
                <h4>Î©îÏãúÏßÄ (ÏÑ†ÌÉùÏÇ¨Ìï≠)</h4>
                <textarea id="profitMessage" placeholder="ÏàòÏùµÏù∏Ï¶ùÍ≥º Ìï®Íªò Î≥¥ÎÇº Î©îÏãúÏßÄÎ•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî..." rows="3"></textarea>
            </div>
            
            <div class="profit-target-section">
                <h4>Ï†ÑÏÜ° ÎåÄÏÉÅ</h4>
                <div class="target-selection">
                    <label>
                        <input type="radio" name="profitTarget" value="all" checked>
                        Î™®Îì† ÌôúÏÑ± Í≥ÑÏ†ïÏùò Î™®Îì† Í∑∏Î£π
                    </label>
                    <label>
                        <input type="radio" name="profitTarget" value="expert">
                        Ï†ÑÎ¨∏Í∞ÄÎßå
                    </label>
                    <label>
                        <input type="radio" name="profitTarget" value="firepower">
                        ÌôîÎ†•Îßå
                    </label>
                    <label>
                        <input type="radio" name="profitTarget" value="select">
                        ÏÑ†ÌÉùÎêú Í∑∏Î£πÎßå
                    </label>
                </div>
                
                <div class="selected-groups-display" id="profitSelectedGroups" style="display: none;">
                    <!-- ÏÑ†ÌÉùÎêú Í∑∏Î£π Î™©Î°ùÏù¥ ÌëúÏãúÎê® -->
                </div>
            </div>
            
            <div class="modal-actions">
                <button id="sendProfitBtn" class="btn-send-profit">üì§ ÏàòÏùµÏù∏Ï¶ù Ï†ÑÏÜ°</button>
                <button id="cancelProfitBtn">Ï∑®ÏÜå</button>
            </div>
        </div>
    </div>

    <!-- API Í¥ÄÎ¶¨ Î™®Îã¨ -->
    <div class="modal" id="apiManagerModal">
        <div class="modal-content api-manager-modal">
            <h3>üîß API Í¥ÄÎ¶¨</h3>
            
            <div class="api-manager-tabs">
                <button class="tab-btn active" data-tab="expert">Ï†ÑÎ¨∏Í∞Ä API</button>
                <button class="tab-btn" data-tab="firepower">ÌôîÎ†• API</button>
            </div>
            
            <!-- Ï†ÑÎ¨∏Í∞Ä API Í¥ÄÎ¶¨ -->
            <div class="api-tab-content active" id="expertApiTab">
                <div class="api-section-header">
                    <h4>Ï†ÑÎ¨∏Í∞Ä ÏÑπÏÖò API Î™©Î°ù</h4>
                    <button class="btn-add-api" id="addExpertApiConfig">+ ÏÉà API Ï∂îÍ∞Ä</button>
                </div>
                <div class="api-list" id="expertApiList">
                    <!-- Ï†ÑÎ¨∏Í∞Ä API Î™©Î°ùÏù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
                </div>
            </div>
            
            <!-- ÌôîÎ†• API Í¥ÄÎ¶¨ -->
            <div class="api-tab-content" id="firepowerApiTab">
                <div class="api-section-header">
                    <h4>ÌôîÎ†• ÏÑπÏÖò API Î™©Î°ù</h4>
                    <button class="btn-add-api" id="addFirepowerApiConfig">+ ÏÉà API Ï∂îÍ∞Ä</button>
                </div>
                <div class="api-list" id="firepowerApiList">
                    <!-- ÌôîÎ†• API Î™©Î°ùÏù¥ ÎèôÏ†ÅÏúºÎ°ú ÏÉùÏÑ±Îê® -->
                </div>
            </div>
            
            <div class="modal-actions">
                <button id="saveApiConfigBtn" class="btn-save">Ï†ÄÏû•</button>
                <button id="cancelApiManagerBtn" class="btn-cancel">Ï∑®ÏÜå</button>
            </div>
        </div>
    </div>

    <!-- API Ï∂îÍ∞Ä/ÏàòÏ†ï Î™®Îã¨ -->
    <div class="modal" id="apiEditModal">
        <div class="modal-content">
            <h3 id="apiEditTitle">API Ï∂îÍ∞Ä</h3>
            
            <div class="form-group">
                <label for="apiEditPhone">Ï†ÑÌôîÎ≤àÌò∏</label>
                <input type="tel" id="apiEditPhone" placeholder="Ïòà: +1234567890, +33612345678">
            </div>
            
            <div class="form-group">
                <label for="apiEditId">API ID</label>
                <input type="number" id="apiEditId" placeholder="12345678">
            </div>
            
            <div class="form-group">
                <label for="apiEditHash">API Hash</label>
                <input type="text" id="apiEditHash" placeholder="32ÏûêÎ¶¨ Ìï¥Ïãú">
            </div>
            
            <div class="form-group">
                <label for="apiEditType">Î∞∞Ïπò ÌÉÄÏûÖ</label>
                <select id="apiEditType">
                    <option value="firepower">ÌôîÎ†• (Í∏∞Î≥∏)</option>
                    <option value="expert">Ï†ÑÎ¨∏Í∞Ä</option>
                </select>
            </div>
            
            <div class="form-group" id="firepowerNumberGroup" style="display: none;">
                <label for="apiEditFirepowerNumber">ÌôîÎ†• Î≤àÌò∏</label>
                <input type="number" id="apiEditFirepowerNumber" min="1" max="30" placeholder="1-30">
            </div>
            
            <div class="modal-actions">
                <button id="saveApiEditBtn" class="btn-save">Ï†ÄÏû•</button>
                <button id="cancelApiEditBtn" class="btn-cancel">Ï∑®ÏÜå</button>
            </div>
        </div>
    </div>

    <!-- Î©îÏãúÏßÄ Ï†ÑÏÜ° ÏÜçÎèÑ ÏÑ§Ï†ï Î™®Îã¨ -->
    <div class="modal" id="speedSettingsModal">
        <div class="modal-content speed-settings-modal">
            <h3>‚ö° Î©îÏãúÏßÄ Ï†ÑÏÜ° ÏÜçÎèÑ ÏÑ§Ï†ï</h3>
            
            <div class="speed-settings-container">
                <div class="current-speed-display">
                    <label>ÌòÑÏû¨ ÏÑ§Ï†ïÎêú ÏÜçÎèÑ:</label>
                    <span id="currentSpeedDisplay">0.8Ï¥à</span>
                </div>
                
                <div class="speed-presets">
                    <h4>Îπ†Î•∏ ÏÑ§Ï†ï</h4>
                    <div class="speed-preset-buttons">
                        <button class="speed-preset-btn" data-speed="500">‚ö° Îπ†Î¶Ñ (0.5Ï¥à)</button>
                        <button class="speed-preset-btn" data-speed="800">üöÄ Î≥¥ÌÜµ (0.8Ï¥à)</button>
                        <button class="speed-preset-btn active" data-speed="1000">üêå ÏïàÏ†Ñ (1.0Ï¥à)</button>
                        <button class="speed-preset-btn" data-speed="1500">üõ°Ô∏è Îß§Ïö∞ ÏïàÏ†Ñ (1.5Ï¥à)</button>
                        <button class="speed-preset-btn" data-speed="2000">üîí Ï¥àÏïàÏ†Ñ (2.0Ï¥à)</button>
                    </div>
                </div>
                
                <div class="custom-speed-setting">
                    <h4>ÏÇ¨Ïö©Ïûê Ï†ïÏùò ÏÜçÎèÑ</h4>
                    <div class="custom-speed-input">
                        <label for="customSpeedInput">Ï†ÑÏÜ° Í∞ÑÍ≤© (Î∞ÄÎ¶¨Ï¥à):</label>
                        <input type="number" id="customSpeedInput" min="100" max="5000" step="100" value="800">
                        <span class="speed-unit">ms</span>
                    </div>
                    <div class="speed-preview">
                        <span id="speedPreview">= 0.8Ï¥à</span>
                    </div>
                </div>
                
                <div class="speed-warning">
                    <p><strong>‚ö†Ô∏è Ï£ºÏùòÏÇ¨Ìï≠:</strong></p>
                    <ul>
                        <li>ÎÑàÎ¨¥ Îπ†Î•∏ ÏÜçÎèÑ(0.3Ï¥à ÎØ∏Îßå)Îäî Í≥ÑÏ†ï Ï†úÏû¨ ÏúÑÌóòÏù¥ ÏûàÏäµÎãàÎã§</li>
                        <li>ÏïàÏ†ÑÌïú ÏÜçÎèÑÎäî 0.8Ï¥à Ïù¥ÏÉÅÏùÑ Í∂åÏû•Ìï©ÎãàÎã§</li>
                        <li>ÌôîÎ†• Î©îÏãúÏßÄÎäî Î≥ÑÎèÑÎ°ú 1Ï¥àÎ°ú Í≥†Ï†ïÎêòÏñ¥ ÏûàÏäµÎãàÎã§</li>
                    </ul>
                </div>
            </div>
            
            <div class="modal-actions">
                <button id="applySpeedBtn" class="btn-apply">‚úÖ Ï†ÅÏö©</button>
                <button id="cancelSpeedBtn" class="btn-cancel">Ï∑®ÏÜå</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    
    <!-- Ïù∏ÌÖîÎ¶¨Ï†ÑÌä∏ ÎèôÍ∏∞Ìôî ÏãúÏä§ÌÖú CSS -->
    <style>
        /* Î©îÏãúÏßÄ ÌÖúÌîåÎ¶ø Ìó§Îçî Ïä§ÌÉÄÏùº */
        .template-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .btn-speed-settings {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .btn-speed-settings:hover {
            background: linear-gradient(135deg, #e55a2e, #e8841b);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        /* ÏÜçÎèÑ ÏÑ§Ï†ï Î™®Îã¨ Ïä§ÌÉÄÏùº */
        .speed-settings-modal {
            max-width: 500px;
            width: 90%;
        }
        
        .speed-settings-container {
            padding: 20px 0;
        }
        
        .current-speed-display {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .current-speed-display label {
            display: block;
            font-weight: 600;
            color: #495057;
            margin-bottom: 5px;
        }
        
        .current-speed-display span {
            font-size: 24px;
            font-weight: bold;
            color: #007bff;
        }
        
        .speed-presets {
            margin-bottom: 25px;
        }
        
        .speed-presets h4 {
            margin-bottom: 15px;
            color: #495057;
            font-size: 16px;
        }
        
        .speed-preset-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 10px;
        }
        
        .speed-preset-btn {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            padding: 12px 8px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            text-align: center;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .speed-preset-btn:hover {
            background: #e9ecef;
            border-color: #adb5bd;
        }
        
        .speed-preset-btn.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .custom-speed-setting {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .custom-speed-setting h4 {
            margin-bottom: 15px;
            color: #495057;
        }
        
        .custom-speed-input {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .custom-speed-input label {
            font-weight: 500;
            color: #495057;
        }
        
        .custom-speed-input input {
            flex: 1;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .speed-unit {
            font-weight: 500;
            color: #6c757d;
        }
        
        .speed-preview {
            text-align: center;
            margin-top: 10px;
        }
        
        .speed-preview span {
            font-size: 18px;
            font-weight: bold;
            color: #28a745;
        }
        
        .speed-warning {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 15px;
        }
        
        .speed-warning p {
            margin: 0 0 10px 0;
            font-weight: 600;
            color: #856404;
        }
        
        .speed-warning ul {
            margin: 0;
            padding-left: 20px;
            color: #856404;
        }
        
        .speed-warning li {
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .btn-apply {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
        }
        
        .btn-apply:hover {
            background: #218838;
        }
        
        /* Ïã†Í∑ú Í∑∏Î£π ÏïåÎ¶º Ïï†ÎãàÎ©îÏù¥ÏÖò */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        /* Ïã†Í∑ú Í∑∏Î£π ÏïåÎ¶º Ïä§ÌÉÄÏùº */
        .new-groups-notification {
            font-size: 14px;
            line-height: 1.4;
        }
        
        .notification-header {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
            border-radius: 7px 7px 0 0;
        }
        
        .notification-icon {
            font-size: 18px;
            margin-right: 8px;
        }
        
        .notification-title {
            flex: 1;
            font-weight: 600;
            color: #333;
        }
        
        .notification-close {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            color: #666;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .notification-close:hover {
            color: #000;
        }
        
        .notification-content {
            padding: 16px;
        }
        
        .notification-message {
            margin: 0 0 12px 0;
            color: #555;
        }
        
        .new-groups-list {
            list-style: none;
            padding: 0;
            margin: 0 0 16px 0;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .new-group-item {
            display: flex;
            align-items: center;
            padding: 6px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .new-group-item:last-child {
            border-bottom: none;
        }
        
        .new-group-item input[type="checkbox"] {
            margin-right: 8px;
        }
        
        .group-name {
            flex: 1;
            cursor: pointer;
            color: #333;
        }
        
        .notification-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .notification-actions button {
            padding: 6px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: #fff;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }
        
        .btn-add-selected {
            background: #007bff !important;
            color: white !important;
            border-color: #007bff !important;
        }
        
        .btn-add-selected:hover {
            background: #0056b3 !important;
        }
        
        .btn-add-all {
            background: #28a745 !important;
            color: white !important;
            border-color: #28a745 !important;
        }
        
        .btn-add-all:hover {
            background: #1e7e34 !important;
        }
        
        .btn-ignore:hover {
            background: #f8f9fa;
        }
        
        /* ÏÉàÎ°úÍ≥†Ïπ® Î≤ÑÌäº ÏÉÅÌÉú ÌëúÏãú */
        .btn-refresh-all-groups {
            transition: all 0.3s ease;
        }
        
        .btn-refresh-all-groups:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        /* Í∑∏Î£π ÏÉÅÌÉú ÏãúÍ∞ÅÏ†Å ÌîºÎìúÎ∞± */
        .firepower-groups .group-item.removed {
            opacity: 0.5;
            text-decoration: line-through;
            color: #dc3545;
        }
        
        .firepower-groups .group-item.new {
            background: #d4edda;
            border-left: 3px solid #28a745;
            animation: highlightNew 2s ease-out;
        }
        
        @keyframes highlightNew {
            0% {
                background: #28a745;
                color: white;
            }
            100% {
                background: #d4edda;
                color: inherit;
            }
        }
        
        /* ÎèôÍ∏∞Ìôî ÏÉÅÌÉú ÌëúÏãú */
        .sync-status {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: 500;
            margin-left: 8px;
        }
        
        .sync-status.syncing {
            background: #fff3cd;
            color: #856404;
        }
        
        .sync-status.success {
            background: #d4edda;
            color: #155724;
        }
        
        .sync-status.error {
            background: #f8d7da;
            color: #721c24;
        }
    </style>
    <script>
        // Î°úÍ∑∏Ïù∏ ÏÉÅÌÉú ÌôïÏù∏
        async function checkAuth() {
            try {
                const response = await fetch('http://localhost:5000/api/auth/status', {
                    credentials: 'include'
                });
                
                const result = await response.json();
                
                if (!result.authenticated) {
                    // Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄÎ°ú Î¶¨Îã§Ïù¥Î†âÌä∏
                    window.location.href = 'login.html';
                    return false;
                }
                
                // ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï†ÄÏû•
                window.userInfo = result.user;
                return true;
            } catch (error) {
                console.error('Auth check failed:', error);
                window.location.href = 'login.html';
                return false;
            }
        }
        
        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ïù∏Ï¶ù ÌôïÏù∏
        checkAuth();
    </script>
    <script src="config_client.js"></script>
    <script src="app.js"></script>
</body>
</html>